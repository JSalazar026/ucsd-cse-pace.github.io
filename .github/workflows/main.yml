name: Deploy to pace.ucsd.edu

on:
  # NOTE(joe): can uncomment these to always deploy on each commit.
  # For now, need to go to the Actions tab and manually deploy
  # (Makes it easier to use github.io for testing)
  # push:
  #  branches: [ "main" ]
  # pull_request:
  #  branches: [ "main" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      # Runs a single command using the runners shell
      - name: Copy to pace.ucsd.edu
        env:
          PACE_SSH_KEY: ${{ secrets.PACE_SSH_KEY }}
        run: |
          echo $PACE_SSH_KEY > ~/id_rsa_pace
          ls -l ~/
          scp -i ~/id_rsa_pace -r ./* pace@pace.ucsd.edu:~/htdocs/
